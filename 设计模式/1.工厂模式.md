工厂模式的核心就是**区分变与不变**

### 1：构造器模式

```javascript
在js中，只要是通过构造函数创建，我们就叫做构造器模式。


function User(name , age, career) {
    this.name = name
    this.age = age
    this.career = career 
}

const user = new User(name, age, career)
```

在使用构造器模式的时候，我们实际是抽象了每个对象实例的变与不变。在工厂模式的时候，就是去抽象不同构造函数（类）的变与不变。

### 2：简单工厂模式

工厂模式其实就是**将创建对象的过程单独封装。**
工厂模式的目的，就是为了实现**无脑传参。**

使用场景：
有构造函数的地方，我们就应该想到简单工厂；在写了大量构造函数、调用了大量的 new、自觉非常不爽的情况下，我们就应该思考是不是可以掏出工厂模式重构我们的代码了。

### 3：抽象工厂模式

抽象工厂模式的定义，是**围绕一个超级工厂创建其他工厂。**

简单工厂与抽象工厂的共同点：都是尝试去**分离一个系统中的变与不变的部分**。
简单工厂与抽象工厂的不同点：
1：简单工厂处理的是类，是简单的类。
2：抽象工厂处理的复杂的类，里面的逻辑非常 的多。

### 4：抽象工厂模式的四个关键角色

| 名字     | 含义                                                         | 解释                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 抽象工厂 | 抽象类 1：不能被用于生成抽象实例。2：用于声明最终目标产品的共性 | 在一个系统里，抽象工厂可以有多个（大家可以想象我们的手机厂后来被一个更大的厂收购了，这个厂里除了手机抽象类，还有平板、游戏机抽象类等等），每一个抽象工厂对应的这一类的产品，被称为“产品族”。 |
| 具体工厂 | 用于生成具体产品族的一个具体的产品                           | 继承自抽象工厂、实现了抽象工厂里声明的那些方法，用于创建具体的产品的类。 |
| 抽象产品 | 抽象类，不能生成具体的实例。                                 | 上面我们看到，具体工厂里实现的接口，会依赖一些类，这些类对应到各种各样的具体的细粒度产品（比如操作系统、硬件等），这些具体产品类的共性各自抽离，便对应到了各自的抽象产品类 |
| 具体产品 | 用于生成产品族里的一个具体的产品所依赖的更细粒度的产品       | 比如我们上文中具体的一种操作系统、或具体的一种硬件等         |

### 5:     抽象工厂的总结

```javascript
抽象工厂，抽象产品，不能实例化，定义了一些公共的特性。
具体工厂 继承至 抽象工厂，生成的实例就是最后的产品。
具体产品 继承至 抽象产品，生成的是产品族里面的某些具体的产品。
抽象产品与具体工厂的联系是，在具体工厂中的方法会关联抽象产品。
```

### 6：抽象工厂的部分代码

```javascript
// 抽象工厂。
class MobilePhoneFactory {
  // 提供操作系统的接口
  createOs() {
    throw new Error("抽象工厂方法不允许直接调用，你需要将我重写！");
  }
}

// 抽象产品-OS
class OS {
  controlHardWare() {
    throw new Error("OS-抽象产品的方法不允许直接调用，你需要将我重写！");
  }
}


// OS-具体产品-安卓os IOS
class AndroidOs extends OS {
  controlHardWare() {
    console.log('安卓os --ready')
  }
}
class IOS extends OS { 
  controlHardWare() {
    console.log('IOS --ready')
  }
}


// 具体工厂。
class FakeStarFactory extends MobilePhoneFactory {
  createOs() {
    // 提供安卓实例。
    return new AndroidOs()
  }
}


// 生成具体的手机。
const myPhone = new FakeStarFactory()
// 让手机有OS
const myOS = myPhone.createOs()
// 定义具体的OS
myOS.controlHardWare()
```
